<ng-template #operatorUrl let-url="url" let-label="label">
  <li *ngIf="url != null">
    <code><a href="{{url}}">{{label}}</a></code>
  </li>
</ng-template>

<p
  class="clickable"
  (click)="toggleWebsitesListCollapsed()"
><span class="collapse-handle">{{websitesListCollapsed ? '[+ show]' : '[- hide]'}}</span> The following documentation websites are available: </p>
<ul [ngbCollapse]="websitesListCollapsed">
  <li>
    <code><a href="https://www.learnrxjs.io/operators/">www.learnrxjs.io</a></code>:
    a nice mix of description and examples, a more accessible reference
  </li>
  <li>
    <code><a href="http://rxmarbles.com/">rxmarbles.com</a></code>:
    no description but interactive diagram examples, to check what it actually does
  </li>
  <li>
    <code><a href="https://rxjs-dev.firebaseapp.com/api/">rxjs-dev.firebaseapp.com</a></code>:
    the implementation reference, exhaustive
  </li>
  <li>
    <code><a href="http://reactivex.io/documentation/operators">reactivex.io</a></code>:
    the parent project documentation, sometimes a bit too generic or distant from the implementation
  </li>
</ul>

<table class="table mt-4">
  <tbody>
    <tr *ngFor="let operator of operatorsList">
      <td class="fitting-cell"><code>{{operator.name}}</code></td>
      <td>
        <p class="collapse-handle" (click)="operator.toggleDescriptionCollapsed()">
          {{operator.descriptionCollapsed ? '[+ show description]' : '[- hide description]'}}
        </p>
        <ng-container *ngIf="!operator.descriptionCollapsed">
          <p *ngFor="let paragraph of operator.description" [innerHTML]="paragraph"></p>
        </ng-container>

        <ul>
          <ng-container *ngTemplateOutlet="operatorUrl; context: {url: operator.learnrxjs, label: 'www.learnrxjs.io'}"></ng-container>

          <ng-container *ngTemplateOutlet="operatorUrl; context: {url: operator.rxmarbles, label: 'rxmarbles.com'}"></ng-container>

          <li *ngIf="operator.moreLinksAvailable">
            <span
              class="collapse-handle"
              (click)="operator.toggleLinksCollapsed()"
            >
              {{operator.linksCollapsed ? '[+ show more]' : '[- show less]'}}
            </span>
          </li>

          <ng-container
            *ngIf="operator.moreLinksAvailable && !operator.linksCollapsed"
          >
            <ng-container *ngTemplateOutlet="operatorUrl; context: {url: operator.rxjs, label: 'rxjs-dev.firebaseapp.com'}"></ng-container>

            <ng-container *ngTemplateOutlet="operatorUrl; context: {url: operator.reactivex, label: 'reactivex.io'}"></ng-container>
          </ng-container>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
